import requests

WIGLE_ENDPOINT = 'https://wigle.net/api/v1'

# How many entries will be sent from the server at one time. This is hardcoded
# on the website.
WIGLE_PAGESIZE = 100


def normalise_entry(net):
    net['trilat'] = float(net['trilat'])
    net['trilong'] = float(net['trilong'])


class WigleError(Exception):
    pass


class WigleAuthenticationError(WigleError):
    """
    Incorrect credentials.
    """
    pass


class WigleRequestFailure(WigleError):
    """
    Generic "request unsuccessful" error.
    """
    pass


class WigleRatelimitExceeded(WigleRequestFailure):
    """
    Too many requests have been made in a short time.
    """
    pass


def raise_wigle_error(data):
    message = data.get('message')
    if message == "too many queries":
        raise WigleRatelimitExceeded()
    else:
        raise WigleRequestFailure(message)

class Wigle(object):
    def __init__(self, user, password):
        """
        Create a new webservice proxy object. It will authenticate with user
        and password credentials on the first connection attempt.
        """
        self.user = user
        self.password = password
        self._auth_cookies = None

    def _wigle_request(self, method, auth=False, **kwargs):
        url = WIGLE_ENDPOINT + '/' + method
        if auth:
            cookies = self._auth_cookies
        else:
            cookies = None
        headers = {
            'Accept': 'application/json, text/javascript',
            'User-Agent': 'python wigle client',
            'Content-Type': 'application/json',
            }
        return requests.post(url, cookies=cookies, headers=headers, **kwargs)

    def _authenticated_request(self, method, **kwargs):
        self._ensure_authenticated()
        return self._wigle_request(method, auth=True, **kwargs)

    def _unauthenticated_request(self, method, **kwargs):
        return self._wigle_request(method, auth=False, **kwargs)

    def reauthenticate(self):
        self._auth_cookies = None
        auth_data = {
            'credential_0': self.user,
            'credential_1': self.password,
            'noexpire': 'off',
            'destination': '/',
        }
        resp = self._unauthenticated_request('jsonLogin', params=auth_data, allow_redirects=False)
        if 'auth' in resp.cookies:
            self._auth_cookies = resp.cookies
        else:
            raise WigleAuthenticationError('Could not authenticate as user %s' % self.user)

    def _ensure_authenticated(self):
        if not self._auth_cookies:
            self.reauthenticate()

    def get_user_info(self):
        """
        Request information about current user.

        Returns:
            dict: Description of user.
        """
        resp = self._authenticated_request('jsonUser')
        info = resp.json()
        return info


    def from_coordinates(self, lat, lon, lat_off = 0.000944, lon_off = 0.001148):
        return self.search(lat_range=(lat - lat_off, lat + lat_off), 
                            long_range = (lon - lon_off, lon + lon_off))
    

    def search(self, lat_range=None, long_range=None, variance=None,
               bssid=None, ssid=None,
               last_update=None,
               address=None, state=None, zipcode=None,
               on_new_page=None, max_results=100):
        """
        Search the Wigle wifi database for matching entries. The following
        criteria are supported:

        Args:
            lat_range ((float, float)): latitude range
            long_range ((float, float)): longitude range
            variance (float): radius tolerance in degrees
            bssid (str): BSSID/MAC of AP
            ssid (str): SSID of network
            last_update (datetime): when was the AP last seen
            address (str): location, address
            state (str): location, state
            zipcode (str): location, zip code
            on_new_page (func(int)): callback to notify when requesting new
                page of results

        Returns:
            [dict]: list of dicts describing matching wifis
        """

        params = {
            'latrange1': lat_range[0] if lat_range else "",
            'latrange2': lat_range[1] if lat_range else "",
            'longrange1': long_range[0] if long_range else "",
            'longrange2': long_range[1] if long_range else "",
            'variance': str(variance) if variance else "0.01",
            'netid': bssid or "",
            'ssid': ssid or "",
            'lastupdt': last_update.strftime("%Y%m%d%H%M%S") if last_update else "",
            'addresscode': address or "",
            'statecode': state or "",
            'zipcode': zipcode or "",
            'Query': "Query",
        }

        # to test:
        # wifis = [{u'comment': None, u'qos': u'2', u'name': None, u'netid': u'00:0B:46:92:25:EA', u'personid': u'63096', u'trilong': -75.1727066, u'lastupdt': u'20091206205026', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90194321, u'firsttime': u'2007-04-24 02:34:36', u'transid': u'20070423-00059', u'lasttime': u'2009-12-06 20:44:29', u'type': u'probe', u'channel': u'0', u'ssid': u'CSXTransportationWirelessNetw0rk'}, {u'comment': None, u'qos': u'1', u'name': None, u'netid': u'00:60:B3:6F:E3:7F', u'personid': u'16485', u'trilong': -75.1723175, u'lastupdt': u'20070423210540', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90186691, u'firsttime': u'2005-07-01 13:33:55', u'transid': u'20050701-00028', u'lasttime': u'2007-04-23 23:05:40', u'type': u'????', u'channel': u'0', u'ssid': u'SEPTA'}, {u'comment': None, u'qos': u'2', u'name': None, u'netid': u'00:0D:97:04:9C:22', u'personid': u'64297', u'trilong': -75.17228699, u'lastupdt': u'20120901174835', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'N', u'flags': u'0001', u'bcninterval': u'250', u'trilat': 39.90080643, u'firsttime': u'2007-08-03 05:30:11', u'transid': u'20070803-00047', u'lasttime': u'2012-09-01 19:35:45', u'type': u'????', u'channel': u'6', u'ssid': u'WirelessPhiladelphia'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'00:15:70:15:EB:45', u'personid': u'11126', u'trilong': -75.17216492, u'lastupdt': u'20130615124649', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90058899, u'firsttime': u'2013-04-11 19:54:27', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'6', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:3E:FB:E1', u'personid': u'11126', u'trilong': -75.17216492, u'lastupdt': u'20130615124701', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90058899, u'firsttime': u'2013-04-11 19:54:27', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:20', u'type': u'infra', u'channel': u'11', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:31:00', u'personid': u'11126', u'trilong': -75.17216492, u'lastupdt': u'20130615124705', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90058899, u'firsttime': u'2013-04-11 19:54:27', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:20', u'type': u'infra', u'channel': u'11', u'ssid': u'Events'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:31:60', u'personid': u'11126', u'trilong': -75.17216492, u'lastupdt': u'20130615124649', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90058899, u'firsttime': u'2013-04-11 19:54:27', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'11', u'ssid': u'Events'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:31:62', u'personid': u'11126', u'trilong': -75.17216492, u'lastupdt': u'20130615124709', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90058899, u'firsttime': u'2013-04-11 19:54:27', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'11', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:31:D4', u'personid': u'11126', u'trilong': -75.17216492, u'lastupdt': u'20130615124706', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90058899, u'firsttime': u'2013-04-11 19:54:27', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:84:80:61', u'personid': u'11126', u'trilong': -75.17216492, u'lastupdt': u'20130615124642', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90058899, u'firsttime': u'2013-04-11 19:54:27', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:20', u'type': u'infra', u'channel': u'6', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:24:FA:C1', u'personid': u'11126', u'trilong': -75.17214203, u'lastupdt': u'20130615124648', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90107346, u'firsttime': u'2013-04-11 19:54:27', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'6', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:30:B2', u'personid': u'11126', u'trilong': -75.17212677, u'lastupdt': u'20130615124658', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90110016, u'firsttime': u'2013-04-11 19:54:27', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'00:A0:F8:DB:45:83', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124701', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'W', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:20', u'type': u'infra', u'channel': u'1', u'ssid': u'newera1'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'08:D0:9F:8F:04:80', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124655', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'11', u'ssid': u'PointStreak'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'24:01:C7:3A:5B:10', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124702', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': u'PointStreak'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'2C:3F:38:AA:E6:10', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124700', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:20', u'type': u'infra', u'channel': u'1', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'2C:3F:38:AA:E6:12', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124705', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'1', u'ssid': u'Events'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'2C:3F:38:C1:DB:90', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124655', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': u'Events'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'2C:3F:38:C1:DB:92', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124701', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:01:EB:80', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124659', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:01:EB:81', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124643', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:20', u'type': u'infra', u'channel': u'1', u'ssid': u'Events'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:01:EB:82', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124703', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:41:46:90', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124657', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:20', u'type': u'infra', u'channel': u'1', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:41:46:91', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124647', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:84:E4:80', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124708', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'6', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:84:E4:81', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124657', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'6', u'ssid': u'Events'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:84:E4:82', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124652', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:20', u'type': u'infra', u'channel': u'6', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:AA:E4:A0', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124701', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:20', u'type': u'infra', u'channel': u'6', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:AA:E4:A1', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124710', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'6', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:AA:E4:A2', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124647', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'6', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:BC:3C:A0', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124658', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'6', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:BC:3C:A1', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124656', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'6', u'ssid': u'Events'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:BC:3C:A2', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124702', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'6', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'84:1B:5E:33:63:8C', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124701', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'11', u'ssid': u'LEXUS-WFS1'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:24:BB:22', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124703', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:66:D7:D0', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124654', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:20', u'type': u'infra', u'channel': u'11', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:66:D7:D1', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124649', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:20', u'type': u'infra', u'channel': u'11', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:66:D9:F0', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124654', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'1', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:66:D9:F1', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124704', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'1', u'ssid': u'Events'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:66:D9:F2', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124655', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:8E:C9:F0', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124654', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'6', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:8E:C9:F1', u'personid': u'11126', u'trilong': -75.17211151, u'lastupdt': u'20130615124642', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.901577, u'firsttime': u'2013-04-11 21:27:50', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'6', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'00:15:70:16:07:F9', u'personid': u'11126', u'trilong': -75.17208099, u'lastupdt': u'20130615124650', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90161514, u'firsttime': u'2013-04-11 21:36:20', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'1', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'00:60:B3:6F:E5:FA', u'personid': u'63096', u'trilong': -75.17208099, u'lastupdt': u'20070423193022', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.9018631, u'firsttime': u'2007-04-24 02:34:36', u'transid': u'20070423-00059', u'lasttime': u'2007-04-23 21:30:22', u'type': u'????', u'channel': u'0', u'ssid': u'default'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:85:13:91', u'personid': u'11126', u'trilong': -75.17208099, u'lastupdt': u'20130615124653', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90161514, u'firsttime': u'2013-04-11 21:36:20', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'11', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:85:13:92', u'personid': u'11126', u'trilong': -75.17208099, u'lastupdt': u'20130615124651', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90161514, u'firsttime': u'2013-04-11 21:36:20', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'11', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:85:15:71', u'personid': u'11126', u'trilong': -75.17208099, u'lastupdt': u'20130615124647', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:36:26', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'1', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:AA:E3:D0', u'personid': u'11126', u'trilong': -75.17208099, u'lastupdt': u'20130615124641', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:36:26', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:24:BB:21', u'personid': u'11126', u'trilong': -75.17208099, u'lastupdt': u'20130615124642', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90161514, u'firsttime': u'2013-04-11 21:36:20', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'00:15:70:15:EB:44', u'personid': u'11126', u'trilong': -75.17207336, u'lastupdt': u'20130615124652', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.9007988, u'firsttime': u'2013-04-11 19:54:07', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'6', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'04:C5:A4:08:1D:70', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124701', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:38:56', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'11', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'04:C5:A4:08:1D:71', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124709', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:38:56', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'11', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'04:C5:A4:08:1D:72', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124700', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:38:56', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'11', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'2C:3F:38:AA:E5:10', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124706', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:38:56', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': u'PointStreak'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'34:BD:C8:DB:C7:F0', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124644', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:36:46', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'1', u'ssid': u'PointStreak'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'40:F4:EC:7F:67:20', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124705', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:38:56', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'11', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'40:F4:EC:7F:67:21', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124642', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:38:56', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'11', u'ssid': u'Events'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'40:F4:EC:7F:67:22', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124650', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:38:56', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'11', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:3E:79:D0', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124702', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:38:56', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'11', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:3E:79:D1', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124642', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:38:56', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'11', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:40:EB:51', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124652', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:36:46', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'6', u'ssid': u'Events'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:40:EB:52', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124647', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:36:46', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'6', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:84:E4:70', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124706', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:38:56', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'11', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:84:E4:72', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124710', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:38:56', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'11', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:AA:E3:D1', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124703', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:36:46', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:AA:E3:D2', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124658', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:36:46', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:23', u'type': u'infra', u'channel': u'1', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:BC:71:81', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124707', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:38:56', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'1', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:24:BB:20', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124654', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:38:56', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'1', u'ssid': u'Events'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:31:61', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124700', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90089035, u'firsttime': u'2013-04-11 19:54:07', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'11', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:31:D0', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124645', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:36:46', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'1', u'ssid': u'Events'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:31:D2', u'personid': u'11126', u'trilong': -75.17206573, u'lastupdt': u'20130615124651', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90161896, u'firsttime': u'2013-04-11 21:36:46', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'1', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:41:EA:C1', u'personid': u'11126', u'trilong': -75.17205811, u'lastupdt': u'20130615124656', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90067291, u'firsttime': u'2013-04-11 19:54:07', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'6', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:2B:80', u'personid': u'11126', u'trilong': -75.17205811, u'lastupdt': u'20130615124644', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90085602, u'firsttime': u'2013-04-11 19:54:07', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'11', u'ssid': u'Events'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:2B:82', u'personid': u'11126', u'trilong': -75.17205811, u'lastupdt': u'20130615124650', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90085983, u'firsttime': u'2013-04-11 19:54:07', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:23', u'type': u'infra', u'channel': u'11', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:2B:84', u'personid': u'11126', u'trilong': -75.17205811, u'lastupdt': u'20130615124644', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90086746, u'firsttime': u'2013-04-11 19:54:07', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'11', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:30:B0', u'personid': u'11126', u'trilong': -75.17205811, u'lastupdt': u'20130615124701', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90078354, u'firsttime': u'2013-04-11 19:54:07', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'1', u'ssid': u'Events'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'00:15:70:15:EB:EC', u'personid': u'11126', u'trilong': -75.17205048, u'lastupdt': u'20130615124659', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90083313, u'firsttime': u'2013-04-11 19:54:07', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'11', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'00:15:70:15:EB:ED', u'personid': u'11126', u'trilong': -75.17205048, u'lastupdt': u'20130615124655', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90083313, u'firsttime': u'2013-04-11 19:54:07', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:23', u'type': u'infra', u'channel': u'11', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:2B:81', u'personid': u'11126', u'trilong': -75.17205048, u'lastupdt': u'20130615124641', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90078735, u'firsttime': u'2013-04-11 19:54:07', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'11', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'1', u'name': None, u'netid': u'00:0D:97:17:41:51', u'personid': u'63096', u'trilong': -75.17198944, u'lastupdt': u'20070423223518', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'Y', u'flags': None, u'bcninterval': None, u'trilat': 39.90181351, u'firsttime': u'2007-04-24 02:34:37', u'transid': u'20070423-00059', u'lasttime': u'2007-04-24 00:35:18', u'type': u'infra', u'channel': u'11', u'ssid': u'<no ssid>'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:30:B4', u'personid': u'11126', u'trilong': -75.17198181, u'lastupdt': u'20130615124653', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.9010582, u'firsttime': u'2013-04-11 20:06:40', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'2C:3F:38:C1:F9:33', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124656', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90047073, u'firsttime': u'2013-04-11 20:06:32', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:20', u'type': u'infra', u'channel': u'11', u'ssid': u'Events'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'2C:3F:38:C1:F9:34', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124702', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90047073, u'firsttime': u'2013-04-11 20:06:32', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'11', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'2C:3F:38:C1:F9:37', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124645', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90047073, u'firsttime': u'2013-04-11 20:06:32', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:20', u'type': u'infra', u'channel': u'11', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'2C:3F:38:C1:F9:38', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124658', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90047455, u'firsttime': u'2013-04-11 20:06:26', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'11', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:41:EC:B1', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124645', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90047455, u'firsttime': u'2013-04-11 20:06:26', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'6', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:AA:E3:C0', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124709', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90047836, u'firsttime': u'2013-04-11 20:06:40', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:20', u'type': u'infra', u'channel': u'1', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:AA:E3:C1', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124700', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90047836, u'firsttime': u'2013-04-11 20:06:40', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'44:E4:D9:AA:E3:C2', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124701', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90047836, u'firsttime': u'2013-04-11 20:06:40', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'1', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:24:FA:C0', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124707', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90047836, u'firsttime': u'2013-04-11 20:06:40', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:20', u'type': u'infra', u'channel': u'6', u'ssid': u'Events'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:24:FA:C2', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124645', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90047836, u'firsttime': u'2013-04-11 20:06:40', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'6', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:66:AD:E1', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124707', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90047455, u'firsttime': u'2013-04-11 20:06:26', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'6', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:66:AD:E2', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124646', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90047836, u'firsttime': u'2013-04-11 20:06:36', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'6', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:66:AD:E4', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124700', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90047455, u'firsttime': u'2013-04-11 20:06:26', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'6', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:2E:D2', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124705', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90047455, u'firsttime': u'2013-04-11 20:06:26', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'6', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:2E:D4', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124701', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90047073, u'firsttime': u'2013-04-11 20:06:32', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'6', u'ssid': None}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:67:31:02', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124652', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'2', u'flags': None, u'bcninterval': None, u'trilat': 39.90047836, u'firsttime': u'2013-04-11 20:06:33', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:22', u'type': u'infra', u'channel': u'11', u'ssid': u'press'}, {u'comment': None, u'qos': u'0', u'name': None, u'netid': u'C0:62:6B:8E:CA:10', u'personid': u'11126', u'trilong': -75.17188263, u'lastupdt': u'20130615124704', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'?', u'flags': None, u'bcninterval': None, u'trilat': 39.90047455, u'firsttime': u'2013-04-11 20:06:26', u'transid': u'20130613-00423', u'lasttime': u'2013-06-15 14:46:21', u'type': u'infra', u'channel': u'11', u'ssid': u'xfinitywifi'}, {u'comment': None, u'qos': u'2', u'name': None, u'netid': u'00:A0:F8:DB:48:0C', u'personid': u'63096', u'trilong': -75.17179108, u'lastupdt': u'20070423223518', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'Y', u'flags': None, u'bcninterval': None, u'trilat': 39.90180969, u'firsttime': u'2007-04-24 02:34:37', u'transid': u'20070423-00059', u'lasttime': u'2007-04-24 00:35:18', u'type': u'infra', u'channel': u'11', u'ssid': u'newera1'}, {u'comment': None, u'qos': u'2', u'name': None, u'netid': u'00:40:96:25:A5:6C', u'personid': u'63096', u'trilong': -75.17171478, u'lastupdt': u'20070423223518', u'freenet': u'?', u'paynet': u'?', u'userfound': False, u'visible': u'Y', u'wep': u'N', u'flags': None, u'bcninterval': None, u'trilat': 39.90179825, u'firsttime': u'2007-04-24 02:34:37', u'transid': u'20070423-00059', u'lasttime': u'2007-04-24 00:35:18', u'type': u'infra', u'channel': u'1', u'ssid': u'<no ssid>'}]

        # return wifis


        wifis = []
        while True:
            if on_new_page:
                on_new_page(params.get('first', 1))
            resp = self._authenticated_request('jsonSearch', params=params)
            
            data = resp.json()
            if not data['success']:
                raise_wigle_error(data)

            for result in data['results'][:max_results-len(wifis)]:
                normalise_entry(result)
                wifis.append(result)

            if data['resultCount'] < WIGLE_PAGESIZE or len(wifis) >= max_results:
                break

            params['first'] = data['last'] + 1

        return wifis

